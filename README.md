# TsApi ‚Äì –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∏ —Ç–æ–≤–∞—Ä–∞–º–∏

## üìå –û–ø–∏—Å–∞–Ω–∏–µ
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç **RBAC (Role-Based Access Control)** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —Ç–æ–≤–∞—Ä–∞–º.  
–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç —Ä–æ–ª–∏, –∞ —Ä–æ–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –Ω–∞–±–æ—Ä—É –ø—Ä–∞–≤ (`view`, `create`, `update`, `delete`).  
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ **JWT**, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `cookie`.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   Python 3.8+
*   Django 3.2+
*   Django REST Framework

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r requirements.txt
    ```

2.  **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
    ```bash
    python manage.py migrate
    ```

3.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
    ```bash
    python manage.py runserver
    ```

4.  **–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:** `http://127.0.0.1:8000/`

---

## üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ–ª–∏
*   **`admin`** ‚Äî –∏–º–µ–µ—Ç –≤—Å–µ –ø—Ä–∞–≤–∞ (`view`, `create`, `update`, `delete`)
*   **`manager`** ‚Äî –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã
*   **`guest`** ‚Äî –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
*   `view` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤
*   `create` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
*   `update` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤  
*   `delete` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **JWT (JSON Web Token)**. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –≤—Ö–æ–¥–µ —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ HTTP-only cookie.

---

## üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`/api/auth/`)

*   **`POST /api/auth/register/`** ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ```json
    {
      "first_name": "Ivan",
      "last_name": "Ivanov",
      "email": "ivan@example.com",
      "password": "securepassword123",
      "role": "guest" // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å, –±—É–¥–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ —Ä–æ–ª—å "guest"
    }
    ```

*   **`POST /api/auth/login/`** ‚Äî –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
    ```json
    {
      "email": "ivan@example.com",
      "password": "securepassword123"
    }
    ```

*   **`POST /api/auth/logout/`** ‚Äî –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã (—É–¥–∞–ª—è–µ—Ç JWT cookie)

*   **`POST /api/auth/update/`** ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

*   **`DELETE /api/auth/delete/`** ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

*   **`GET /api/auth/roles/permissions/`** ‚Äî –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è `admin`)

*   **`POST /api/auth/roles/permissions/`** ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–ª—è —Ä–æ–ª–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è `admin`)
    ```json
    {
      "role": "manager",
      "permissions": ["view", "update"]
    }
    ```

### üì¶ –¢–æ–≤–∞—Ä—ã (`/api/goods/`)

*   **`GET /api/goods/products/`** ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
*   **`GET /api/goods/products/<id>/`** ‚Äî –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
*   **`POST /api/goods/products/`** ‚Äî –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–æ `create`)
    ```json
    {
      "name": "–ù–æ—É—Ç–±—É–∫",
      "price": 60000,
      "description": "–ò–≥—Ä–æ–≤–æ–π –Ω–æ—É—Ç–±—É–∫"
    }
    ```
*   **`PUT /api/goods/products/<id>/`** ‚Äî –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–æ `update`)
*   **`DELETE /api/goods/products/<id>/`** ‚Äî –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–æ `delete`)

---
